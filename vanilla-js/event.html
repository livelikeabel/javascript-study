<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <meta http-equiv="refresh" content="5">
  <title>Document</title>
</head>

<body>
  <button>add one item</button>


  <div class="one">
    one
    <div class="two">
      two
      <div class="three">
        three
      </div>
    </div>
  </div>


  <h1>오늘의 할 일</h1>
  <ul class="itemList">
    <li>
      <input type="checkbox" id="item1">
      <label for="item1">이벤트 버블링 학습</label>
    </li>
    <li>
      <input type="checkbox" id="item2">
      <label for="item2">이벤트 캡쳐 학습</label>
    </li>
  </ul>

  <script>
    var button = document.querySelector('button');
    button.addEventListener('click', addItem);

    function addItem(event) {
      console.log(event);
    }


    var divs = document.querySelectorAll('div');
    divs.forEach(function (div) {
      div.addEventListener('click', logEvent, { capture: true });
    });

    function logEvent(event) {
      // event.stopPropagation()
      console.log(event.currentTarget.className);
    }

    // event를 일일히 다는 작업
    // var inputs = document.querySelectorAll('input');
    // inputs.forEach(function(input) {
    //   input.addEventListener('click', function(event) {
    //     alert('clicked');
    //   });
    // });

    var itemList = document.querySelector('.itemList');
    itemList.addEventListener('click', function (event) {
      const curr = event.target ? event.target.nodeName : null;
      console.log(curr)
      curr === 'INPUT' ? alert('clicked') : event.stopPropagation();
    });

    // 새 리스트 아이템을 추가하는 코드
    var itemList = document.querySelector('.itemList');

    var li = document.createElement('li');
    var input = document.createElement('input');
    var label = document.createElement('label');
    var labelText = document.createTextNode('이벤트 위임 학습');

    input.setAttribute('type', 'checkbox');
    input.setAttribute('id', 'item3');
    label.setAttribute('for', 'item3');
    label.appendChild(labelText);
    li.appendChild(input);
    li.appendChild(label);
    itemList.appendChild(li);
  </script>
</body>

</html>